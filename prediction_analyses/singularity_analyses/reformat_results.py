"""
take data generated by reduce_results.py
and collapse into unified structures
"""

import pickle

d=pickle.load(open('rf_data.pkl','rb'))

acc={}
features={}

for a,f in d:
    k=list(a.keys())[0]
    if not k in acc:
        acc[k]={}
    if not k in features:
        features[k]={}
    v=list(a[k].keys())[0]
    if not v in acc[k]:
        acc[k][v]=a[k][v]
    else:
        acc[k][v].append(a[k][v])
    if not v in features[k]:
        features[k][v]=f[k][v]
    else:
        features[k][v].append(f[k][v])

pickle.dump((acc,features),open('rf_data_collapsed.pkl','wb'))
